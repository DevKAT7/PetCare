@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthStateProvider

<div class="d-flex justify-content-between align-items-center mb-4 pt-2">
    <div>
        <h4 class="mb-0 fw-bold">Hello, @userName! </h4>
        <small class="text-muted">Have a nice day!</small>
    </div>

    <a href="profile" class="profile-icon-btn">
        <i class="bi bi-person-fill"></i>
    </a>
</div>

<div class="card-custom" style="background-color: #f0f2f5;">
    <h6 class="fw-bold">Twoja najbliższa wizyta:</h6>

    <div class="d-flex align-items-center my-2">
        <span class="fs-5 me-2">🐶</span>
        <span><strong>Mika</strong> (kontrola)</span>
    </div>

    <div class="mb-3">
        JUTRO, 21.11 o 10:30
    </div>

    <div class="d-flex gap-2">
        <button class="btn btn-danger btn-sm">Odwołaj</button>
        <button class="btn btn-secondary btn-sm" style="background-color: #267C84; border: none;">Zmień termin</button>
    </div>
</div>

<button class="btn w-100 text-white my-3 py-3 shadow-sm d-flex align-items-center justify-content-center"
        style="background-color: #267C84; border-radius: 8px;">
    <span class="oi oi-plus me-2"></span> Umów nową wizytę
</button>

<h5 class="mt-4 mb-3">Twoje zwierzaki:</h5>

<div class="card-custom">
    <div class="d-flex align-items-center mb-2">
        <span class="me-2">🐶</span> <span>Mika</span>
    </div>
    <div class="d-flex align-items-center mb-3">
        <span class="me-2">🐱</span> <span>Mruczek</span>
    </div>

    <button class="btn btn-sm w-100 text-white" style="background-color: #267C84;">
        + Dodaj nowego zwierzaka
    </button>
</div>

@code {
    private string userName = "Anna";

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (user.Identity != null && user.Identity.IsAuthenticated)
        {
            userName = user.Identity.Name ?? "User";
        }
    }
}