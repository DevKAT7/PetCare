@page "/profile"
@using PetCare.MobileApp.Auth
@inject AuthenticationStateProvider AuthStateProvider
@inject NavigationManager Navigation
@attribute [Authorize]

<div class="d-flex flex-column align-items-center mt-4">
    <div class="profile-avatar mb-3">
        <i class="bi bi-person-circle"></i>
    </div>
    
    <h3>Your Profile</h3>
    <p class="text-muted">Manage your account</p>
</div>

<div class="list-group mt-4 shadow-sm mx-2 rounded-3">
    <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3">
        <span><i class="bi bi-gear me-2"></i> Settings</span>
        <i class="bi bi-chevron-right text-muted"></i>
    </button>
    
    <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3">
        <span><i class="bi bi-shield-lock me-2"></i> Change password</span>
        <i class="bi bi-chevron-right text-muted"></i>
    </button>
    
    <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3">
        <span><i class="bi bi-question-circle me-2"></i> Help</span>
        <i class="bi bi-chevron-right text-muted"></i>
    </button>
</div>

<div class="p-4 mt-auto">
    <button class="btn btn-outline-danger w-100 py-3 fw-bold" @onclick="Logout">
        <i class="bi bi-box-arrow-right me-2"></i> Logout
    </button>
</div>

<style>
    .profile-avatar {
        font-size: 5rem;
        color: var(--petcare-primary);
    }
</style>

@code {
    private async Task Logout()
    {
        SecureStorage.Remove("auth_token");

        if (AuthStateProvider is CustomAuthStateProvider customProvider)
        {
            customProvider.MarkUserAsLoggedOut();
        }

        Navigation.NavigateTo("/login");
    }
}
